###############################################
# SERVIDOR HTTP
###############################################
quarkus.http.port=${PORT:8080}
quarkus.http.cors=true
quarkus.http.cors.origins=*
quarkus.http.cors.methods=GET,POST,PUT,DELETE,PATCH,OPTIONS
quarkus.http.cors.headers=Content-Type,Authorization
quarkus.http.cors.access-control-max-age=24H


###############################################
# BANCO DE DADOS — NEON POSTGRESQL (POOLER)
###############################################
quarkus.datasource.db-kind=postgresql
quarkus.datasource.username=neondb_owner
quarkus.datasource.password=npg_4Wg8TrdjLqSm
quarkus.datasource.jdbc.url=jdbc:postgresql://ep-icy-surf-acnqxgrg-pooler.sa-east-1.aws.neon.tech:5432/neondb?sslmode=require

# Pool ajustado para RAM limitada do Railway (512–1024 MB)
quarkus.datasource.jdbc.min-size=1
quarkus.datasource.jdbc.max-size=5
quarkus.datasource.jdbc.acquisition-timeout=10s

# Evita quedas por timeout do Neon
quarkus.datasource.jdbc.max-lifetime=25M
quarkus.datasource.jdbc.idle-removal-interval=5M
quarkus.datasource.jdbc.validation-timeout=5s


###############################################
# HIBERNATE ORM
###############################################
quarkus.hibernate-orm.database.generation=update
quarkus.hibernate-orm.log.sql=false
quarkus.hibernate-orm.jdbc.statement-batch-size=20


###############################################
# OPENAPI (Swagger)
###############################################
quarkus.smallrye-openapi.path=/openapi
quarkus.swagger-ui.path=/swagger-ui
quarkus.swagger-ui.always-include=true


###############################################
# TRANSAÇÕES
###############################################
# Timeout global seguro
quarkus.transaction-manager.default-transaction-timeout=120


###############################################
# LOGGING
###############################################
quarkus.log.console.format=%d{HH:mm:ss} %-5p [%c] %s%e%n
quarkus.log.console.level=INFO


###############################################
# THREADS — OTIMIZADO PARA RAILWAY
###############################################
# Railway Free = pouca CPU.  
# Quarkus com muitas threads = throttle + lentidão.
# O ideal é reduzir para não estourar CPU.
quarkus.thread-pool.core-threads=8
quarkus.thread-pool.max-threads=30
quarkus.thread-pool.queue-size=200
